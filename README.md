# TRB_EA – 時間指定レンジブレイクEA

## 概要

このEAは、指定した時間帯をレンジとし、そのレンジをブレイクしたタイミングでエントリーを行うMetaTrader 5用エキスパートアドバイザー（EA）です。  

---

## 主な機能

- 任意の時間帯をレンジ（高値・安値）設定
- レンジブレイク時の売買エントリー
- 指定時刻でのポジションクローズ
- チャート上へのレンジ描画機能（描画/非描画切り替え可）
- リスク％指定によるロット自動計算／固定ロット選択可
- 最大同時ポジション数の制御

---

## パラメータ説明

| パラメータ名                     | 内容・用途                                                           | 初期値         |
|----------------------------------|---------------------------------------------------------------------|----------------|
| MagicNumber                      | EA識別用のマジックナンバー                                           | 12345000       |
| Range_Start_JST_Hour             | レンジ計測開始時刻（日本時間・時）                                   | 15             |
| Range_Start_JST_Min              | レンジ計測開始時刻（日本時間・分）                                   | 0              |
| Range_End_JST_Hour               | レンジ計測終了時刻（日本時間・時）                                   | 17             |
| Range_End_JST_Min                | レンジ計測終了時刻（日本時間・分）                                   | 0              |
| Position_Close_JST_Hour          | ポジション強制決済時刻（日本時間・時）                               | 21             |
| Position_Close_JST_Min           | ポジション強制決済時刻（日本時間・分）                               | 0              |
| 最大ポジション数                 | 同時に保有できる最大ポジション数                                     | 3              |
| オブジェクトを描写する日数       | チャートにレンジ等のラインを描画する過去日数                         | 3              |
| チャートオブジェクトを描写するか | チャート上にオブジェクト（ライン等）を描画するか（true/false）        | true           |
| リスク許容率（口座残高に対する割合）| 1トレードあたり許容するリスク割合（口座残高の○％まで）               | 0.5            |
| Lot計算モード                    | ロットサイズの決定方法（リスク％計算 or 固定）                       | リスク％計算   |
| 固定Lotサイズ                    | 固定ロットモード時のロットサイズ                                     | 0.01           |

---

### パラメータ補足

- **レンジ計測時間**（Range_Start_JST_Hour/Min 〜 Range_End_JST_Hour/Min）で、その日の高値・安値を自動計測します。
- 時間設定はすべて**日本時間**です。サーバー時間、サマータイム含め自動で換算されます。
- **ポジションクローズ時間**（Position_Close_JST_Hour/Min）で全ポジションを自動決済します。
- **Lot計算モード**で「リスク％計算」または「固定ロット」を選択可能です。リスク％計算の場合は口座残高に応じてロットが自動計算されます。

---

## 使い方

1. `TRB_EA.ex5`をMetaTrader 5の`Experts`フォルダにコピー
2. チャートにEAを適用
3. 必要に応じてパラメータを調整
4. まずは**デモ口座**で十分なテストを推奨

---

## 推奨設定・注意事項

- 対象通貨ペア・時間足はご自身の運用戦略に合わせて設定してください
- バックテスト、最適化等、高速処理が必要な時はオブジェクト描写をfalseにし、描写日数も0に指定してください。描写オブジェクトは処理が重いためです。
- パラメータは過去検証の上、ご自身の裁量で調整してください
- 運用前に必ずデモ口座で十分な動作確認をしてください
- 本EAのご利用は自己責任で

---

## 2015年からの10年分のバックテスト結果

![TesterGraphReport2025 05 22](https://github.com/user-attachments/assets/b439ba68-1241-4fdb-b505-bbf4cc4afb9c)
![ReportTester-52136179](https://github.com/user-attachments/assets/8a47cefc-15ff-4e9f-8b5f-f9c591fa78cd)
![ReportTester-52136179-holding](https://github.com/user-attachments/assets/40226f95-f146-4de1-8d4d-ddcbd4e59b10)
![ReportTester-52136179-hst](https://github.com/user-attachments/assets/846aa5e8-5e03-4066-8962-23e4422cf246)
![ReportTester-52136179-mfemae](https://github.com/user-attachments/assets/57ae8166-8e82-48f0-983b-81641974670d)

![スクリーンショット 2025-06-02 152250](https://github.com/user-attachments/assets/6bde3979-da18-4f47-856a-f5f8c413d53b)
![スクリーンショット 2025-06-02 152257](https://github.com/user-attachments/assets/63411349-4fe2-4ebe-b12e-cbeda9d85912)

###　サンプル動画



https://github.com/user-attachments/assets/4fd9e855-6ad0-4ce6-ac27-2c24a378de62






